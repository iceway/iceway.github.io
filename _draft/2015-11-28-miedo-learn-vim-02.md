---
layout: post
title:  "Miedo学VIM（2）"
date: Tue, 01 Dec 2015 18:57:31
categories: Miedo学VIM
tags: vim
---

这一篇我们介绍更多的VIM命令和操作，学习后可以让你的文本编辑效率大幅提高。

## 操作

VIM的高效和强大最能在普通模式下体现出来，编辑模式下的操作就是传统编辑器那样直接通过键盘插入、追加、删除等。这里介绍的基本操作都是在普通模式下完成的，所有的操作都区分大小写。

### 移动光标

-   `w` （向右移动到）下一个词**w**ord
-   `W` （向右移动到）下一个词（跳过标点）
-   `b` （向左移动到）前一个词word **b**ackward
-   `B` （向左移动到）前一个词（跳过标点）
-   `e` 跳到当前光标所在词的尾端
-   `E` 跳到当前光标所在词的尾端（跳过标点）
-   `ge` 跳到前一个词的末尾
-   `gE` 跳到前一个词（跳过标点）的末尾

> 解释一下词和（跳过标点的词）：这里词是指由**字母**、**数字**和**下划线**组成的连续且由空白（包括空格，TAB制表符以及换行和回车）或者其他字符分隔的字符串，而跳过标点是指把标点也当词的内容只以空白分隔出不同的词。举例来说：对于下面这行内容，如果当前光标在addr的“a”上，那么键入`w`会跳过当前词“addr”，光标跑到addr后面的这个“:”上；而如果光标在“a”上时键入`W`，会跳过当前词“addr:10.11.12.103”，光标跑到下一个词Bcast的“B”上。

> ```
> inet addr:10.11.12.103  Bcast:10.11.12.255  Mask:255.255.255.0
>      |   ^              ^
>      |-w-|              |
>      |---------W--------|
> ```

-   `0` 跳到当前行的开头（是数字0不是大写的字母O）
-   `^` 跳到当前行的第一个非空字符
-   `$` 跳到当前行的行尾

数字0可以理解为跳到当前行的第0个字母。

-   `{` 跳到上一段（以空白行分隔）
-   `}` 跳到下一段（以空白行分隔）
-   `%` 跳到当前对应的括号上（各种括号都可以）

> 小技巧：  
> 1. 键入`%`匹配括号时，会自动往前搜索遇到的第一个括号（圆括号、方括号、花括号都可以），然后将光标跳转到找到的第一个括号上，再次键入`%`，会自动跳转到和这个括号配对的另外一个括号上。  
> 2. `%`可以在成对出现的地方来回跳转，比如在C代码中，如果有很多嵌套的`#ifdef XXX`、`#else`和`#endif`，那么在ifdef所在行上键入`%`可以跳转到对应的else和endif行。

-   `/xxx` 搜索xxx，并往后跳到第一个找到的xxx处，没找到的话光标不移动
-   `n` 命令`/xxx`搜索出多个结果时，键入该命令向前移动到下一个匹配处**n**ext
-   `N` 命令`/xxx`搜索出多个结果时，键入该命令向后移动到上一个匹配处，逆向next
-   `#` 向前搜索当前光标所在的词，搜索结果可使用`n`和`N`跳转
-   `*` 向后搜索当前光标所在的词，搜索结果可使用`n`和`N`跳转
-   `fx` 在当前行移动到光标之后字符x出现的第一个位置**f**ind **x**
-   `Fx` 在当前行移动到光标之前字符x出现的第一个位置，逆向find
-   `tx` 在当前行移动到光标之后字符x出现的第一个位置前面**t**o **x**
-   `Tx` 在当前行移动到光标之前字符x出现的第一个位置前面，逆向to
-   `gd` 跳到光标所在位置词的定义位置**g**o **d**efine

命令`fx`、`Fx`、`tx`、`Tx`都可以用`;`重复，用`,`也可以重复，但是查找方向会相反。

-   `H` 跳到当前窗口视野的开头处**H**ome
-   `M` 跳到当前窗口视野的中间处**M**idele
-   `L` 跳到当前窗口视野的最后处**L**ast
-   `gg` 跳到文档顶部（第一行）
-   `G` 跳到文档底部（最后一行）
-   `ctrl+d` 向下翻半页down
-   `ctrl+u` 向上翻半页up
-   `ctrl+f` 向下翻整页
-   `ctrl+b` 向上翻整页

上面这几个命令可以大幅度移动光标。

-    `:XXX` 光标跳到第XXX行（XXX是数字行号）
-    `XXXG` 和`:XXX`效果相同，跳到第XXX行

## 基本编辑

-   `i` 在光标当前位置之前插入**i**nsert
-   `I` 在光标所在行的第一个字符之前插入
-   `a` 在光标当前位置之后追加**a**pend
-   `A` 在光标所在行的最后位置追加
-   `o` 在光标所在行下新插入一行
-   `O` 在光标所在行上新插入一行

这几个命令键入后，直接会进入编辑模式，接着就可以像在传统编辑器中一样输入，窗口最下面一行会显示“-- INSERT --”标识，如果没有显示可以在普通模式下键入`:set showmode`开启当前模式显示。

-   `x` 删除当前光标位置的字
-   `dw` 删除当前光标所在的词**d**elete **w**ord
-   `dd` 删除当前光标所在行

同理`dW`可以删除直到下一个空白为止的‘词’，‘d’跟上其他可以让光标移动的命令可以删除在光标跳跃范围内的内容。

-   `u` 撤销上一个删除操作**u**ndo，多次按下`u`会逐次撤销之前的删除操作
-   `Ctrl+r` 重做/回退前一个命令**r**edo
-   `U` 行撤销（特殊版撤销），撤销所有在最近编辑的行上的操作。如输入该命令两次会取消前一个`U`所做的改动（有点拗口，多试几次就知道了）。

这几个撤销和重做的命令描述起来不太好理解，要多做练习才能掌握。

-   `ZZ` 和`:wq`一样，保存并退出
-   `ZQ` 和`:q!`一样，不保存改动直接退出
-   `:help XXX` 查找关于XXX关键字的帮助信息，比如`:help ZZ`可以看到`ZZ`命令的帮助信息


